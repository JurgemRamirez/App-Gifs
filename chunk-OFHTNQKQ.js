import{I as m,K as c,P as h,a as p,b as f,eb as n,fb as G,o as g,qb as d,ua as s}from"./chunk-PMQC65UJ.js";var o={production:!0,companyName:"Gifs",companyName2:"App",companySlogan:"Maneja tus gifs",API_GIFS:"Y4QxMbBo5sA5qz0oUC83xu4AqOAD4pLD",API_URL:"https://api.giphy.com/v1"};var a=class{static mapGiphyItemToGif(t){return{id:t.id,title:t.title,url:t.images.original.url}}static mapGiphyItemsToGifArray(t){return t.map(i=>this.mapGiphyItemToGif(i))}};var l=()=>{let e=localStorage.getItem("gifs")??"[]";return JSON.parse(e)},y=class e{trendingGifs=s([]);tendingGifsLoading=s(!1);trendingPage=s(0);trendingGifGroup=n(()=>{let t=[];for(let i=0;i<this.trendingGifs().length;i+=3)t.push(this.trendingGifs().slice(i,i+3));return t});searchHistory=s(l());searchHistoryKey=n(()=>Object.keys(this.searchHistory()));http=h(d);constructor(){this.loadTrendingGifs()}saveGifsToLocalStorage=G(()=>{localStorage.setItem("gifs",JSON.stringify(this.searchHistory()))});loadTrendingGifs(){this.tendingGifsLoading()||(this.tendingGifsLoading.set(!0),this.http.get(`${o.API_URL}/gifs/trending`,{params:{api_key:o.API_GIFS,limit:"20",offset:this.trendingPage()*20}}).subscribe(t=>{let i=a.mapGiphyItemsToGifArray(t.data);this.trendingGifs.update(r=>[...r,...i]),this.trendingPage.update(r=>r+1),this.tendingGifsLoading.set(!1)}))}searchGifs(t){return this.http.get(`${o.API_URL}/gifs/search`,{params:{api_key:o.API_GIFS,q:t,limit:"20"}}).pipe(g(i=>a.mapGiphyItemsToGifArray(i.data)),m(i=>{this.searchHistory.update(r=>f(p({},r),{[t.toLowerCase()]:i}))}))}getHistoryGifs(t){return this.searchHistory()[t.toLowerCase()]??[]}static \u0275fac=function(i){return new(i||e)};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};export{o as a,y as b};
